#------------------------------------------------------------------------------
# Author: Kalyan S. Perumalla
#------------------------------------------------------------------------------

#------------------------------------------------------------------------------
CXX = mpiCC
CFLAGS = -O3 -DMPI_AVAILABLE=1 -DNODEBUG=0 -DNOTRACING=1 -I. -I./libsynk

#------------------------------------------------------------------------------
all: libmusik.a

#------------------------------------------------------------------------------
libmusik.a: ./libsynk/libsynk.a musik.o
	$(AR) crv libmusik.a musik.o

#------------------------------------------------------------------------------
musik.o: musik.cpp musik.h musikpriv.h
	$(CXX) -o musik.o $(CFLAGS) -c musik.cpp

#------------------------------------------------------------------------------
./libsynk/libsynk.a: ./libsynk
	cd ./libsynk; $(MAKE)

#------------------------------------------------------------------------------
clean:
	rm -f musik.o libmusik.a
	cd libsynk; $(MAKE) clean

#------------------------------------------------------------------------------
